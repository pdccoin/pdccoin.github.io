
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="description" content="This site aims to provide the docs
                you need to understand Pandora and start building Pandora-based
                applications." />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta property="og:title" content="Payment Processing &#8212; Pandora" />
    <meta property="og:description" content="This site aims to provide the
    docs you need to understand Pandora and start building Pandora-based
    applications." />
    <meta property="og:image" content="https://developer.pandora.org/static/pandoradocs.png" />
    <meta property="og:type" content="website" />
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:400,700&display=swap" rel="stylesheet">
    
    <title>Payment Processing &#8212; Pandora</title>

    <link rel="stylesheet" href="../static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../static/sphinxbootstrap4.css" type="text/css" />
    <link rel="stylesheet" href="../static/bootstrap-4.3.1-dist/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../static/css/main.css" />
    
    <script id="documentation_options" data-url_root="../" src="../static/documentation_options.js"></script>
    <script src="../static/jquery.js"></script>
    <script src="../static/underscore.js"></script>
    <script src="../static/doctools.js"></script>
    <script src="../static/language_data.js"></script>
    <script src="../static/js/jquery.qrcode.js"></script>
    <script type="text/javascript" src="../static/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../static/sphinxbootstrap4.js"></script>
    <link rel="shortcut icon" href="../static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="P2P Network" href="p2p_networking.html" />
    <link rel="prev" title="Transactions" href="transactions.html" /> 
  </head><body>
  
<nav class="navbar navbar-expand-md  fixed-top navbar-dark">
		<div class="content-container d-flex flex-wrap">
			<a class="navbar-brand py-1" href="../">
				<div class="header-logo">
					<div class="logo-light"></div>
				</div>
			</a>
			<button class="navbar-toggler navbar-dark ml-auto py-2 black" type="button" data-toggle="collapse"
				data-target="#exCollapsingNavbar2">
				&#9776;
			</button>
			<div class="navbar-collapse collapse" id="exCollapsingNavbar2">
				<ul class="navbar-nav mr-auto">
					
				</ul>
				<div class="dropdown-divider d-block d-md-none my-3"></div>
				
<form class="form-inline navbar-search" action="../search.html" method="get">
  <input type="text" name="q" class="navbar-search-input form-control" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

			</div>
		</div>
	
		<!--<div class="row hidden-sm-up">
						<div class="collapse navbar-toggleable-xs container" id="exCollapsingNavbar2">
								<div class="container">
								　　 <a class="navbar-brand" href="../">
												Pandora
										</a>
								</div>
								<ul class="nav navbar-nav">
								</ul>
								<div class="dropdown-divider"></div>
								<div class="navbar-text">search<div>
								
<form class="form-inline navbar-search" action="../search.html" method="get">
  <input type="text" name="q" class="navbar-search-input form-control" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

						</div>
				</div>-->
</nav>
</div>

  
  <div class="breadcrumbs-section" role="navigation" aria-label="related navigation">
	<div class="content-container">
		<div class="d-flex justify-content-between flex-wrap">
			<ol class="breadcrumb">
				<li class="breadcrumb-item">
					<a href="../">Pandora</a>
				</li>
				<li class="breadcrumb-item">
					<a href="index.html"  accesskey="U" class="active" >Examples</a>
				</li>
				<li class="breadcrumb-item active">Payment Processing</li>
			</ol>

			<div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
				<a href="transactions.html" title="Previous Chapter: Transactions" class="btn btn-primary"
					role="botton" accesskey="P">
					&laquo; Transactions
				</a>
				<a href="p2p_networking.html" title="Next Chapter: P2P Network" class="btn btn-primary"
					role="botton" accesskey="N">
					P2P Network &raquo;
				</a>
			</div>
		</div>
	</div>
</div>

  <div class="main container-fluid">
    <div class="content-container">
      <div class="row"> 
  
      <div class="sphinxsidebar d-none d-md-block">
        <div class="sphinxsidebarwrapper">          
            <h4>Table Of Contents</h4>
            
            
              <div class="sidebartoctree">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../devguide/">Developer Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../devguide/block_chain.html">Block Chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devguide/transactions.html">Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devguide/contracts.html">Contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devguide/wallets.html">Wallets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devguide/payment_processing.html">Payment Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devguide/operating_modes.html">Operating Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devguide/p2p_network.html">P2P Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devguide/mining.html">Mining</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/block_chain.html">Block Chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/transactions.html">Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/wallets.html">Wallets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/p2p_networking.html">P2P Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/rpc/">RPC API Reference</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="payment_processing.html#">Payment Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="p2p_networking.html">P2P Network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

              </div>
            
          
  <h4>Previous topic</h4>
  <p class="topless"><a href="transactions.html"
                        title="previous chapter">Transactions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="p2p_networking.html"
                        title="next chapter">P2P Network</a></p>
















  <div>
    <h4>Contribute</h4>
    <p class="topless">
      <a href="https://github.com/pdccoin-documentation/website/blob/master/examples/payment_processing.rst">Edit Page</a>
    </p>
  </div>
        </div>
      </div>
       
  
        <div class="document">
        <div class="documentwrapper">
          <div class="bodywrapper">
            <div class="body">
              
  <div class="section" id="payment-processing">
<h1>Payment Processing<a class="headerlink" href="payment_processing.html#payment-processing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="payment-protocol">
<h2>Payment Protocol<a class="headerlink" href="payment_processing.html#payment-protocol" title="Permalink to this headline">¶</a></h2>
<p>To request payment using the payment protocol, you use an extended (but backwards-compatible) <a class="reference internal" href="../terms.html#term-pandora-uri"><span class="std std-ref">“pandora:” URI</span></a>. For example:</p>
<p><img alt="Warning icon" src="../images/icon_warning.svg" /> <strong>Warning:</strong> The payment protocol is considered to be deprecated and will be removed in a later version of Pandora Core. The protocol has multiple security design flaws and implementation flaws in some wallets. Users will begin receiving deprecation warnings in Pandora Core version 0.18 when using <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a> URI’s. Merchants should transition away from <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a> to more secure options such as <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0021.mediawiki">BIP21</a>. Merchants should never require <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a> payments and should provide <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0021.mediawiki">BIP21</a> fallbacks.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pandora:mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN\
?amount=0.10\
&amp;label=Example+Merchant\
&amp;message=Order+of+flowers+%26+chocolates\
&amp;r=https://example.com/pay.php/invoice%3Dda39a3ee
</pre></div>
</div>
<p>The browser, QR code reader, or other program processing the URI opens the spender’s Pandora wallet program on the URI. If the wallet program is aware of the payment protocol, it accesses the URL specified in the <a class="reference internal" href="../terms.html#term-r-parameter"><span class="std std-ref">“r”</span></a> parameter, which should provide it with a serialized <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> served with the <a class="reference external" href="https://en.wikipedia.org/wiki/Internet_media_type">MIME</a> type <code class="docutils literal notranslate"><span class="pre">application/pandora-paymentrequest</span></code>.</p>
<p><strong>Resource:</strong> Gavin Andresen’s <a class="reference external" href="https://github.com/gavinandresen/paymentrequest/blob/master/php/demo_website/createpaymentrequest.php">Payment Request Generator</a> generates custom example URIs and payment requests for use with testnet.</p>
<div class="section" id="paymentrequest-paymentdetails">
<h3>PaymentRequest &amp; PaymentDetails<a class="headerlink" href="payment_processing.html#paymentrequest-paymentdetails" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> is created with data structures built using Google’s <a class="reference external" href="https://developers.google.com/protocol-buffers/">Protocol Buffers</a>. <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a> describes these data structures in the non-sequential way they’re defined in the payment request <a class="reference external" href="https://developers.google.com/protocol-buffers/">protocol buffer</a> code, but the text below will describe them in a more linear order using a simple (but functional) Python CGI program. (For brevity and clarity, many normal CGI best practices are not used in this program.)</p>
<p>The full sequence of events is illustrated below, starting with the spender clicking a <a class="reference internal" href="../terms.html#term-pandora-uri"><span class="std std-ref">“pandora:” URI</span></a> or scanning a <code class="docutils literal notranslate"><span class="pre">pandora:</span></code> QR code.</p>
<div class="figure align-default" id="id1">
<img alt="BIP70 Payment Protocol" src="../images/en-payment-protocol.svg" /><p class="caption"><span class="caption-text">BIP70 Payment Protocol</span><a class="headerlink" href="payment_processing.html#id1" title="Permalink to this image">¶</a></p>
</div>
<p>For the script to use the <a class="reference external" href="https://developers.google.com/protocol-buffers/">protocol buffer</a>, you will need a copy of Google’s <a class="reference external" href="https://developers.google.com/protocol-buffers/">Protocol Buffer</a> compiler (<code class="docutils literal notranslate"><span class="pre">protoc</span></code>), which is available in most modern Linux package managers and <a class="reference external" href="https://developers.google.com/protocol-buffers/">directly from Google.</a> Non-Google <a class="reference external" href="https://developers.google.com/protocol-buffers/">protocol buffer</a> compilers are available for a variety of programming languages. You will also need a copy of the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> <a class="reference external" href="https://github.com/pdccoin/pandora/blob/0.19/src/qt/paymentrequest.proto">Protocol Buffer description</a> from the Pandora Core source code.</p>
<div class="section" id="initialization-code">
<h4>Initialization Code<a class="headerlink" href="payment_processing.html#initialization-code" title="Permalink to this headline">¶</a></h4>
<p>With the Python code generated by <code class="docutils literal notranslate"><span class="pre">protoc</span></code>, we can start our simple CGI program.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="c1">## This is the code generated by protoc --python_out=./ [paymentrequest][paymentrequest].proto</span>
<span class="kn">from</span> <span class="nn">paymentrequest_pb2</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">## Load some functions</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">stdout</span>
<span class="kn">from</span> <span class="nn">OpenSSL.crypto</span> <span class="kn">import</span> <span class="n">FILETYPE_PEM</span><span class="p">,</span> <span class="n">load_privatekey</span><span class="p">,</span> <span class="n">sign</span>

<span class="c1">## Copy three of the classes created by protoc into objects we can use</span>
<span class="n">details</span> <span class="o">=</span> <span class="p">[</span><span class="n">PaymentDetails</span><span class="p">][</span><span class="n">paymentdetails</span><span class="p">]()</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">PaymentRequest</span><span class="p">][</span><span class="n">paymentrequest</span><span class="p">]()</span>
<span class="n">x509</span> <span class="o">=</span> <span class="p">[</span><span class="n">X509Certificates</span><span class="p">][</span><span class="n">x509certificates</span><span class="p">]()</span>
</pre></div>
</div>
<p>The startup code above is quite simple, requiring nothing but the epoch (Unix date) time function, the standard out file descriptor, a few functions from the OpenSSL library, and the data structures and functions created by <code class="docutils literal notranslate"><span class="pre">protoc</span></code>.</p>
</div>
<div class="section" id="configuration-code">
<h4>Configuration Code<a class="headerlink" href="payment_processing.html#configuration-code" title="Permalink to this headline">¶</a></h4>
<p>Next, we’ll set configuration settings which will typically only change when the receiver wants to do something differently. The code pushes a few settings into the <code class="docutils literal notranslate"><span class="pre">request</span></code> (<a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>) and <code class="docutils literal notranslate"><span class="pre">details</span></code> (<a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a>) objects. When we serialize them, <a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a> will be contained within the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## SSL Signature method</span>
<span class="n">request</span><span class="o">.</span><span class="n">pki_type</span> <span class="o">=</span> <span class="s2">&quot;x509+sha256&quot;</span>  <span class="c1">## Default: none</span>

<span class="c1">## Mainnet or testnet?</span>
<span class="n">details</span><span class="o">.</span><span class="p">[</span><span class="n">network</span><span class="p">][</span><span class="n">network</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>  <span class="c1">## Default: main</span>

<span class="c1">## Postback URL</span>
<span class="n">details</span><span class="o">.</span><span class="n">payment_url</span> <span class="o">=</span> <span class="s2">&quot;https://example.com/pay.py&quot;</span>

<span class="c1">## [PaymentDetails][paymentdetails] version number</span>
<span class="n">request</span><span class="o">.</span><span class="n">payment_details_version</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1">## Default: 1</span>

<span class="c1">## [Certificate chain][certificate chain]</span>
<span class="n">x509</span><span class="o">.</span><span class="n">certificate</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;/etc/apache2/example.com-cert.[der][der]&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="c1">#x509.certificate.append(file(&quot;/some/intermediate/cert.[der][der]&quot;, &quot;r&quot;).read())</span>

<span class="c1">## Load private SSL key into memory for signing later</span>
<span class="n">priv_key</span> <span class="o">=</span> <span class="s2">&quot;/etc/apache2/example.com-key.pem&quot;</span>
<span class="n">pw</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>  <span class="c1">## Key password</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="n">load_privatekey</span><span class="p">(</span><span class="n">FILETYPE_PEM</span><span class="p">,</span> <span class="n">file</span><span class="p">(</span><span class="n">priv_key</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">pw</span><span class="p">)</span>
</pre></div>
</div>
<p>Each line is described below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">pki_type</span> <span class="o">=</span> <span class="s2">&quot;x509+sha256&quot;</span>  <span class="c1">## Default: none</span>
</pre></div>
</div>
<p><a class="reference internal" href="../terms.html#term-pp-pki-type"><span class="std std-ref">“pki_type”</span></a>: (optional) tell the receiving wallet program what <a class="reference internal" href="../terms.html#term-pki"><span class="std std-ref">Public-Key Infrastructure</span></a> (<a class="reference internal" href="../terms.html#term-pki"><span class="std std-ref">PKI</span></a>) type you’re using to cryptographically sign your <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> so that it can’t be modified by a <a class="reference external" href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack">man-in-the-middle</a> attack.</p>
<p>If you don’t want to sign the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>, you can choose a <a class="reference internal" href="../terms.html#term-pp-pki-type"><span class="std std-ref">“pki_type”</span></a> of <code class="docutils literal notranslate"><span class="pre">none</span></code> (the default).</p>
<p>If you do choose the sign the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>, you currently have two options defined by <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a>: <code class="docutils literal notranslate"><span class="pre">x509+sha1</span></code> and <code class="docutils literal notranslate"><span class="pre">x509+sha256</span></code>. Both options use the <a class="reference external" href="https://en.wikipedia.org/wiki/X.509">X.509</a> certificate system, the same system used for HTTP Secure (HTTPS). To use either option, you will need a certificate signed by a certificate authority or one of their intermediaries. (A self-signed certificate will not work.)</p>
<p>Each wallet program may choose which certificate authorities to trust, but it’s likely that they’ll trust whatever certificate authorities their operating system trusts. If the wallet program doesn’t have a full operating system, as might be the case for small hardware wallets, <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a> suggests they use the <a class="reference external" href="https://www.mozilla.org/en-US/about/governance/policies/security-group/certs/">Mozilla Root Certificate Store</a>. In general, if a certificate works in your web browser when you connect to your webserver, it will work for your <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequests</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span><span class="o">.</span><span class="p">[</span><span class="n">network</span><span class="p">][</span><span class="n">network</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>  <span class="c1">## Default: main</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">network</span></code>: (optional) tell the spender’s wallet program what Pandora <a class="reference external" href="../devguide/p2p_network.html">network</a> you’re using; <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a> defines “main” for mainnet (actual payments) and “test” for testnet (like mainnet, but fake jus are used). If the wallet program doesn’t run on the <a class="reference external" href="../devguide/p2p_network.html">network</a> you indicate, it will reject the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span><span class="o">.</span><span class="n">payment_url</span> <span class="o">=</span> <span class="s2">&quot;https://example.com/pay.py&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">payment_url</span></code>: (required) tell the spender’s wallet program where to send the Payment message (described later). This can be a static URL, as in this example, or a variable URL such as <code class="docutils literal notranslate"><span class="pre">https://example.com/pay.py?invoice=123.</span></code> It should usually be an HTTPS address to prevent <a class="reference external" href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack">man-in-the-middle</a> attacks from modifying the message.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">payment_details_version</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1">## Default: 1</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">payment_details_version</span></code>: (optional) tell the spender’s wallet program what version of the <a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a> you’re using. As of this writing, the only version is version 1.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## This is the pubkey/certificate corresponding to the private SSL key</span>
<span class="c1">## that we&#39;ll use to sign:</span>
<span class="n">x509</span><span class="o">.</span><span class="n">certificate</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;/etc/apache2/example.com-cert.[der][der]&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">x509certificates</span></code>: (required for signed <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequests</span></a>) you must provide the public SSL key/certificate corresponding to the private SSL key you’ll use to sign the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>. The certificate must be in ASN.1/<a class="reference external" href="https://en.wikipedia.org/wiki/X.690#DER_encoding">DER format</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## If the pubkey/cert above didn&#39;t have the signature of a root</span>
<span class="c1">## certificate authority, we&#39;d then append the [intermediate certificate][intermediate certificate]</span>
<span class="c1">## which signed it:</span>
<span class="c1">#x509.certificate.append(file(&quot;/some/intermediate/cert.[der][der]&quot;, &quot;r&quot;).read())</span>
</pre></div>
</div>
<p>You must also provide any <a class="reference internal" href="../terms.html#term-intermediate-certificate"><span class="std std-ref">intermediate certificates</span></a> necessary to link your certificate to the <a class="reference internal" href="../terms.html#term-root-certificate"><span class="std std-ref">root certificate</span></a> of a certificate authority trusted by the spender’s software, such as a certificate from the Mozilla root store.</p>
<p>The certificates must be provided in a specific order—the same order used by Apache’s <code class="docutils literal notranslate"><span class="pre">SSLCertificateFile</span></code> directive and other server software. The figure below shows the <a class="reference internal" href="../terms.html#term-certificate-chain"><span class="std std-ref">certificate chain</span></a> of the www.pandora.org <a class="reference external" href="https://en.wikipedia.org/wiki/X.509">X.509</a> certificate and how each certificate (except the <a class="reference internal" href="../terms.html#term-root-certificate"><span class="std std-ref">root certificate</span></a>) would be loaded into the <a class="reference internal" href="../terms.html#term-x509certificates"><span class="std std-ref">X509Certificates</span></a> <a class="reference external" href="https://developers.google.com/protocol-buffers/">protocol buffer</a> message.</p>
<div class="figure align-default" id="id2">
<img alt="X509Certificates Loading Order" src="../images/en-cert-order.svg" /><p class="caption"><span class="caption-text">X509Certificates Loading Order</span><a class="headerlink" href="payment_processing.html#id2" title="Permalink to this image">¶</a></p>
</div>
<p>To be specific, the first certificate provided must be the <a class="reference external" href="https://en.wikipedia.org/wiki/X.509">X.509</a> certificate corresponding to the private SSL key which will make the signature, called the <a class="reference internal" href="../terms.html#term-leaf-certificate"><span class="std std-ref">leaf certificate</span></a>. Any <a class="reference internal" href="../terms.html#term-intermediate-certificate"><span class="std std-ref">intermediate certificates</span></a> necessary to link that signed public SSL key to the <a class="reference internal" href="../terms.html#term-root-certificate"><span class="std std-ref">root certificate</span></a> (the certificate authority) are attached separately, with each certificate in <a class="reference external" href="https://en.wikipedia.org/wiki/X.690#DER_encoding">DER format</a> bearing the signature of the certificate that follows it all the way to (but not including) the <a class="reference internal" href="../terms.html#term-root-certificate"><span class="std std-ref">root certificate</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">priv_key</span> <span class="o">=</span> <span class="s2">&quot;/etc/apache2/example.com-key.pem&quot;</span>
<span class="n">pw</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>  <span class="c1">## Key password</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="n">load_privatekey</span><span class="p">(</span><span class="n">FILETYPE_PEM</span><span class="p">,</span> <span class="n">file</span><span class="p">(</span><span class="n">priv_key</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">pw</span><span class="p">)</span>
</pre></div>
</div>
<p>(Required for signed <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequests</span></a>) you will need a private SSL key in a format your SSL library supports (<a class="reference external" href="https://en.wikipedia.org/wiki/X.690#DER_encoding">DER format</a> is not required). In this program, we’ll load it from a PEM file. (Embedding your passphrase in your CGI code, as done here, is obviously a bad idea in real life.)</p>
<p>The private SSL key will not be transmitted with your request. We’re only loading it into memory here so we can use it to sign the request later.</p>
</div>
<div class="section" id="code-variables">
<h4>Code Variables<a class="headerlink" href="payment_processing.html#code-variables" title="Permalink to this headline">¶</a></h4>
<p>Now let’s look at the variables your CGI program will likely set for each payment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Amount of the request</span>
<span class="n">amount</span> <span class="o">=</span> <span class="mi">10000000</span>  <span class="c1">## In jus</span>

<span class="c1">## P2PKH pubkey hash</span>
<span class="n">pubkey_hash</span> <span class="o">=</span> <span class="s2">&quot;2b14950b8d31620c6cc923c5408a701b1ec0a020&quot;</span>
<span class="c1">## P2PKH pubkey script entered as hex and converted to binary</span>
<span class="c1"># OP_DUP OP_HASH160 &lt;push 20 bytes&gt; &lt;pubKey hash&gt; OP_EQUALVERIFY OP_CHECKSIG</span>
<span class="c1">#   76       a9            14       &lt;pubKey hash&gt;        88          ac</span>
<span class="n">hex_script</span> <span class="o">=</span> <span class="s2">&quot;76&quot;</span> <span class="o">+</span> <span class="s2">&quot;a9&quot;</span> <span class="o">+</span> <span class="s2">&quot;14&quot;</span> <span class="o">+</span> <span class="n">pubkey_hash</span> <span class="o">+</span> <span class="s2">&quot;88&quot;</span> <span class="o">+</span> <span class="s2">&quot;ac&quot;</span>
<span class="n">serialized_script</span> <span class="o">=</span> <span class="n">hex_script</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;hex&quot;</span><span class="p">)</span>

<span class="c1">## Load amount and pubkey script into [PaymentDetails][paymentdetails]</span>
<span class="n">details</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="p">,</span> <span class="n">script</span> <span class="o">=</span> <span class="n">serialized_script</span><span class="p">)</span>

<span class="c1">## Memo to display to the spender</span>
<span class="n">details</span><span class="o">.</span><span class="n">memo</span> <span class="o">=</span> <span class="s2">&quot;Flowers &amp; chocolates&quot;</span>

<span class="c1">## Data which should be returned to you with the payment</span>
<span class="n">details</span><span class="o">.</span><span class="n">merchant_data</span> <span class="o">=</span> <span class="s2">&quot;Invoice #123&quot;</span>
</pre></div>
</div>
<p>Each line is described below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">amount</span> <span class="o">=</span> <span class="mi">10000000</span>  <span class="c1">## In jus (=100 mPDC)</span>
</pre></div>
</div>
<p><a class="reference internal" href="../terms.html#term-pp-amount"><span class="std std-ref">“amount”</span></a>: (optional) the <a class="reference internal" href="../terms.html#term-pp-amount"><span class="std std-ref">amount</span></a> you want the spender to pay. You’ll probably get this value from your shopping cart application or <a class="reference internal" href="../terms.html#term-fiat"><span class="std std-ref">fiat</span></a>-to-PDC exchange rate conversion tool. If you leave the amount blank, the wallet program will prompt the spender how much to pay (which can be useful for donations).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pubkey_hash</span> <span class="o">=</span> <span class="s2">&quot;2b14950b8d31620c6cc923c5408a701b1ec0a020&quot;</span>
<span class="c1"># OP_DUP OP_HASH160 &lt;push 20 bytes&gt; &lt;pubKey hash&gt; OP_EQUALVERIFY OP_CHECKSIG</span>
<span class="c1">#   76       a9            14       &lt;pubKey hash&gt;        88          ac</span>
<span class="n">hex_script</span> <span class="o">=</span> <span class="s2">&quot;76&quot;</span> <span class="o">+</span> <span class="s2">&quot;a9&quot;</span> <span class="o">+</span> <span class="s2">&quot;14&quot;</span> <span class="o">+</span> <span class="n">pubkey_hash</span> <span class="o">+</span> <span class="s2">&quot;88&quot;</span> <span class="o">+</span> <span class="s2">&quot;ac&quot;</span>
<span class="n">serialized_script</span> <span class="o">=</span> <span class="n">hex_script</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;hex&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="../terms.html#term-pp-script"><span class="std std-ref">“script”</span></a>: (required) You must specify the pubkey script you want the spender to pay—any valid pubkey script is acceptable. In this example, we’ll request payment to a P2PKH pubkey script.</p>
<p>First we get a pubkey hash. The hash above is the hash form of the address used in the URI examples throughout this section, mjSk1Ny9spzU2fouzYgLqGUD8U41iR35QN.</p>
<p>Next, we plug that hash into the standard P2PKH pubkey script using hex, as illustrated by the code comments.</p>
<p>Finally, we convert the pubkey script from hex into its serialized form.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="p">,</span> <span class="n">script</span> <span class="o">=</span> <span class="n">serialized_script</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">outputs</span></code>: (required) add the pubkey script and (optional) amount to the <a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a> outputs array.</p>
<p>It’s possible to specify multiple <a class="reference internal" href="../terms.html#term-pp-script"><span class="std std-ref">“scripts”</span></a> and <code class="docutils literal notranslate"><span class="pre">amounts</span></code> as part of a <a class="reference internal" href="../terms.html#term-merge-avoidance"><span class="std std-ref">merge avoidance</span></a> strategy, described later in the <a class="reference external" href="../devguide/payment_processing.html#merge-avoidance">Merge Avoidance subsection</a>. However, effective <a class="reference internal" href="../terms.html#term-merge-avoidance"><span class="std std-ref">merge avoidance</span></a> is not possible under the base <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0070.mediawiki">BIP70</a> rules in which the spender pays each <a class="reference internal" href="../terms.html#term-pp-script"><span class="std std-ref">“script”</span></a> the exact amount specified by its paired <a class="reference internal" href="../terms.html#term-pp-amount"><span class="std std-ref">“amount”</span></a>. If the amounts are omitted from all <a class="reference internal" href="../terms.html#term-pp-amount"><span class="std std-ref">“amount”</span></a>/<a class="reference internal" href="../terms.html#term-pp-script"><span class="std std-ref">“script”</span></a> pairs, the spender will be prompted to choose an amount to pay.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span><span class="o">.</span><span class="n">memo</span> <span class="o">=</span> <span class="s2">&quot;Flowers &amp; chocolates&quot;</span>
</pre></div>
</div>
<p><a class="reference internal" href="../terms.html#term-pp-memo"><span class="std std-ref">“memo”</span></a>: (optional) add a memo which will be displayed to the spender as plain UTF-8 text. Embedded HTML or other markup will not be processed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span><span class="o">.</span><span class="n">merchant_data</span> <span class="o">=</span> <span class="s2">&quot;Invoice #123&quot;</span>
</pre></div>
</div>
<p><a class="reference internal" href="../terms.html#term-pp-merchant-data"><span class="std std-ref">“merchant_data”</span></a>: (optional) add arbitrary data which should be sent back to the receiver when the invoice is paid. You can use this to track your invoices, although you can more reliably track payments by generating a <a class="reference internal" href="../terms.html#term-unique-address"><span class="std std-ref">unique address</span></a> for each payment and then tracking when it gets paid.</p>
<p>The <a class="reference internal" href="../terms.html#term-pp-memo"><span class="std std-ref">“memo”</span></a> field can be arbitrarily long, but if you make them too long, you’ll run into the 50,000 byte limit on the entire <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>, which includes the often several kilobytes given over to storing the <a class="reference internal" href="../terms.html#term-certificate-chain"><span class="std std-ref">certificate chain</span></a>. As will be described in a later subsection, the <a class="reference internal" href="../terms.html#term-pp-memo"><span class="std std-ref">“memo”</span></a> field can be used by the spender after payment as part of a cryptographically-proven <a class="reference internal" href="../terms.html#term-receipt"><span class="std std-ref">receipt</span></a>.</p>
</div>
<div class="section" id="derivable-data">
<h4>Derivable Data<a class="headerlink" href="payment_processing.html#derivable-data" title="Permalink to this headline">¶</a></h4>
<p>Next, let’s look at some information your CGI program can automatically derive.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Request creation time</span>
<span class="n">details</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">())</span> <span class="c1">## Current epoch (Unix) time</span>

<span class="c1">## Request expiration time</span>
<span class="n">details</span><span class="o">.</span><span class="n">expires</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">())</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">10</span>  <span class="c1">## 10 minutes from now</span>

<span class="c1">## [PaymentDetails][paymentdetails] is complete; serialize it and store it in [PaymentRequest][paymentrequest]</span>
<span class="n">request</span><span class="o">.</span><span class="n">serialized_payment_details</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>

<span class="c1">## Serialized [certificate chain][certificate chain]</span>
<span class="n">request</span><span class="o">.</span><span class="n">pki_data</span> <span class="o">=</span> <span class="n">x509</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>

<span class="c1">## Initialize signature field so we can sign the full [PaymentRequest][paymentrequest]</span>
<span class="n">request</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

<span class="c1">## Sign [PaymentRequest][paymentrequest]</span>
<span class="n">request</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="s2">&quot;sha256&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Each line is described below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">())</span> <span class="c1">## Current epoch (Unix) time</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">time</span></code>: (required) <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequests</span></a> must indicate when they were created in number of seconds elapsed since 1970-01-01T00:00 UTC (<a class="reference external" href="https://en.wikipedia.org/wiki/Unix_time">Unix epoch time</a> format).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span><span class="o">.</span><span class="n">expires</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">())</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">10</span>  <span class="c1">## 10 minutes from now</span>
</pre></div>
</div>
<p><a class="reference internal" href="../terms.html#term-pp-expires"><span class="std std-ref">“expires”</span></a>: (optional) the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> may also set an <a class="reference internal" href="../terms.html#term-pp-expires"><span class="std std-ref">“expires”</span></a> time after which they’re no longer valid. You probably want to give receivers the ability to configure the expiration time delta; here we used the reasonable choice of 10 minutes. If this request is tied to an order total based on a <a class="reference internal" href="../terms.html#term-fiat"><span class="std std-ref">fiat</span></a>-to-jus exchange rate, you probably want to base this on a delta from the time you got the exchange rate.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">serialized_payment_details</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">serialized_payment_details</span></code>: (required) we’ve now set everything we need to create the <a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a>, so we’ll use the SerializeToString function from the <a class="reference external" href="https://developers.google.com/protocol-buffers/">protocol buffer</a> code to store the <a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a> in the appropriate field of the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">pki_data</span> <span class="o">=</span> <span class="n">x509</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pki_data</span></code>: (required for signed <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequests</span></a>) serialize the <a class="reference internal" href="../terms.html#term-certificate-chain"><span class="std std-ref">certificate chain</span></a> <a class="reference internal" href="../terms.html#term-pp-pki-data"><span class="std std-ref">PKI data</span></a> and store it in the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>We’ve filled out everything in the <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> except the signature, but before we sign it, we have to initialize the signature field by setting it to a zero-byte placeholder.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="s2">&quot;sha256&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">signature</span></code>: (required for signed <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequests</span></a>) now we make the <a class="reference internal" href="../terms.html#term-ssl-signature"><span class="std std-ref">signature</span></a> by signing the completed and serialized <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a>. We’ll use the private key we stored in memory in the configuration section and the same hashing formula we specified in <a class="reference internal" href="../terms.html#term-pp-pki-type"><span class="std std-ref">“pki_type”</span></a> (sha256 in this case)</p>
</div>
<div class="section" id="output-code">
<h4>Output Code<a class="headerlink" href="payment_processing.html#output-code" title="Permalink to this headline">¶</a></h4>
<p>Now that we have <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> all filled out, we can serialize it and send it along with the HTTP headers, as shown in the code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s2">&quot;Content-Type: application/pandora-[paymentrequest][paymentrequest]&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Content-Transfer-Encoding: binary&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>(Required) <a class="reference external" href="https://github.com/pdccoin/bips/blob/master/bip-0071.mediawiki">BIP71</a> defines the content types for <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequests</span></a>, Payments, and PaymentACKs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">request</span></code>: (required) now, to finish, we just dump out the serialized <a class="reference internal" href="../terms.html#term-paymentrequest"><span class="std std-ref">PaymentRequest</span></a> (which contains the serialized <a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a>). The serialized data is in binary, so we can’t use Python’s print() because it would add an extraneous newline.</p>
<p>The following screenshot shows how the authenticated <a class="reference internal" href="../terms.html#term-paymentdetails"><span class="std std-ref">PaymentDetails</span></a> created by the program above appears in the GUI from Pandora Core 0.9.</p>
<div class="figure align-default" id="id3">
<img alt="Pandora Core Showing Validated Payment Request" src="../images/en-btcc-payment-request.png" />
<p class="caption"><span class="caption-text">Pandora Core Showing Validated Payment Request</span><a class="headerlink" href="payment_processing.html#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
</div>


            </div>
          </div>
        </div>
      </div>
        <div class="clearer"></div>
        </div>
      </div>
    </div>
<footer class="footer">
  <div class="footer-with-logo">
    <div class="footer-container">
      <a href="https://pdccoin.github.io/">
        <div class="footer-logo"></div>
      </a>

      <div class="footer-row ">
        <div class="donate">
          <div class="donate-row">
            <div>
              <span class="footer-title">Support pandoracoin.org :</span>
              <button onclick="openDonationModal()" class="donate-btn">Donate</button>
              <p class="donate-text">
                <a class="donate-link" href="pandora:pdc1qdm5w4had2v389eqed64ap2xfkmqvzw7u0rfqjq" target="_blank">pdc1qdm5w4had2v389eqed64ap2xfkmqvzw7u0rfqjq</a>
              </p>
            </div>
          </div>
        </div>
        
        <div class="footermenu">
          <div class="footermenu-item footermenu-introduction">
            <p class="footer-title">Introduction:</p>
            <ul class="footermenu-list">
              
              
              <li>
                <a href="../">Developers</a>
              </li>
              <li>
                <a href="https://pdccoin.github.io/getting-started">Getting started</a>
              </li>
              <li>
                <a href="https://pdccoin.github.io/how-it-works">How it works</a>
              </li>
              <li>
                <a href="https://pdccoin.github.io/you-need-to-know">You need to know</a>
              </li>
                <a href="https://pdccoin.github.io/pandora-paper">White paper</a>
              </li>
            </ul>
          </div>
          
          <div class="footermenu-item footermenu-resources">
            <p class="footer-title">Resources:</p>
            <ul class="footermenu-list">
             
              
              <li>
                <a href="https://pdccoin.github.io/community">Community</a>
              </li>
              <li>
                <a href="https://pdccoin.github.io/vocabulary">Vocabulary</a>
              </li>
              <li>
                <a href="https://pdccoin.github.io/events">Events</a>
              </li>
              <li>
                <a href="https://pdccoin.github.io/pandora-core/">Pandora Core</a>
              </li>
            </ul>
          </div>
          
          <div class="footermenu-item footermenu-participate">
            <p class="footer-title">Participate:</p>
            <ul class="footermenu-list">
             
               <!-- <li>
                <a href="https://pdccoin.github.io/full-node">Running a full node</a>
              </li> -->
              <li>
                <a href="https://pdccoin.github.io/full-node">Running a full node</a>
              </li>
              <li>
                <a href="https://pdccoin.github.io/development">Development</a>
              </li>
            </ul>
          </div>
          <div class="footermenu-item footermenu-other">
            <p class="footer-title">Other:</p>
            <a href="https://pdccoin.github.io/scams">Avoid Scams</a>
            <a href="https://pdccoin.github.io/legal">Legal</a>
            <a href="https://pdccoin.github.io/privacy">Privacy Policy</a>
            <a href="https://pdccoin.github.io/press">Press</a>
            <a href="https://pdccoin.github.io/about-us">About pandora.org</a>
            <a href="https://pdccoin.github.io/blog">Blog</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="copyright">
      <div>&copy; Copyright Pandora Project 2009-2020.</div>
  </div>
</footer>

<div id="donation-modal" style="display: none" class="donation-modal open">
  <div>
    <div>
      <div class="modal-close-btn" onclick="closeDonationModal()">×</div>
      <p class="modal-header-text">Donate to pandoracoin.org</p>
    </div>
    <p class="modal-subheader">Use this QR code or address below</p>
    <div style="text-align: center;">
      <div id="donation-qr-code" data-address="pdc1qdm5w4had2v389eqed64ap2xfkmqvzw7u0rfqjq"></div>
    </div>
    <div>
      <a
        class="donation-btc-address"
        href="pandora:pdc1qdm5w4had2v389eqed64ap2xfkmqvzw7u0rfqjq"
        target="_blank"
      >
        pdc1qdm5w4had2v389eqed64ap2xfkmqvzw7u0rfqjq
      </a>
    </div>
    <div style="overflow-y:hidden;text-align: center;">
      <div class="donation-buttons">
        <button type="button" class="donation-amount-btn" data-amount-usd="5">
          $5.00
          <div class="donation-amount-usd-in-btc">(... PDC)</div>
        </button>
        <button type="button" class="donation-amount-btn" data-amount-usd="25">
          $25.00
          <div class="donation-amount-usd-in-btc">(... PDC)</div>
        </button>
        <button type="button" class="donation-amount-btn" data-amount-usd="50">
          $50.00
          <div class="donation-amount-usd-in-btc">(... PDC)</div>
        </button>
      </div>

      <div class="donation-inputs">
        <input
          type="text"
          placeholder="Or custom amount? (PDC)"
          id="donation-input-amount-btc" class="donation-amount-input">
        <input
          type="text"
          placeholder="Or custom amount? (USD)"
          id="donation-input-amount-usd" class="donation-amount-input">
      </div>

      <div>
        <textarea
          class="donation-amount-input"
          id="donation-input-message"
          placeholder="Optional description (for your wallet)"></textarea>
      </div>
    </div>
  </div>
</div>
  </body>
</html>